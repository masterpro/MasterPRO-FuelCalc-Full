# MasterPRO FuelCalc

Лёгкий веб‑калькулятор стоимости поездки. 

### Что умеет калькулятор

- Рассчитывает стоимость поездки на основании:
  - Цена топлива (€/л)
  - Пробег (км)
  - Средний расход (л/100 км)
- Поддерживает:
  - Обратную поездку (удваивает суммарную дистанцию и потребление)
  - Деление стоимости на пассажиров (поле "Пассажиры")
  - Несколько сегментов маршрута (кнопка "Добавить сегмент"): для каждого сегмента можно задать километраж, расход и режим
  - Режимы вождения: "Город", "Трасса", "Смешанный" (влияют на расход: город +20%, трасса −10%, смешанный 0%)
- Выводит:
  - Стоимость топлива (€/л — отображается из ввода)
  - Километры (итоговая дистанция)
  - Расход на 1 км (л)
  - Стоимость за 1 км (€/км)
  - Стоимость на человека (итог / пассажиры)
  - Итоговая сумма поездки (выделена цветом)

- Тема интерфейса:
  - Переключатель тёмной/светлой темы в правом верхнем углу карточки. Выбор темы сохраняется между визитами.

- Простая оффлайн‑поддержка (PWA):
  - Есть `manifest.json` и `sw.js` — при развёртывании на HTTPS (например, GitHub Pages) можно добавить калькулятор на главный экран телефона.

---

### Быстрая инструкция по использованию

1. Откройте страницу — увидите форму с полями:
   - "Цена топлива (€/л)" — введите цену на текущий момент.
   - "Пробег (км.)" — сколько километров вы планируете проехать.
   - "Расход (л/100км)" — средний расход вашего автомобиля (в литрах на 100 км).

2. Если поездка туда‑обратно — отметьте чекбокс "Обратно".

3. Если необходимо разделить расходы между пассажирами — укажите число в поле "Пассажиры".

4. Для более точного расчёта (например, маршрут с разными этапами) нажмите "Добавить сегмент":
   - Для каждого сегмента укажите километраж, расход и режим.
   - Сегменты суммируются в итоговом расчёте.
   - Каждый сегмент можно удалить кнопкой "Удалить".

5. Смена режима вождения (для основного сегмента) — влияет на расчёт расхода:
   - Город: увеличивает расход на 20%
   - Трасса: уменьшает расход на 10%
   - Смешанный: без изменения

6. Нажмите "Сбросить значения" чтобы вернуть значения к дефолту (появится окно подтверждения):
   - Подтверждение предупреждает об удалении всех сегментов и возврате полей к значениям по умолчанию.
   - Тема (светлая/тёмная) при сбросе НЕ меняется — она сохраняется.

7. Результаты обновляются автоматически при изменении любых значений.

---

### Пояснения по валидации и поведению

- Поля проверяются автоматически:
  - Цена топлива и расход должны быть положительными числами.
  - Пробег — число >= 0.
  - Пассажиры — минимум 1.
- При неверных вводах поле подсвечивается красной рамкой и расчёт временно не производятся (в результатах показываются безопасные значения).
- По умолчанию значения полей заданы (например, цена 1.65 €, пробег 100 км, расход 7.5 л/100км) — вы можете заменить их вручную. Если хотите полностью очистить — используйте "Сбросить значения" (подтверждение).

---

### Установка на смартфон (PWA)

- Приложение подготовлено как PWA (есть `manifest.json` и `sw.js`). Для установки:
  - Разверните сайт по HTTPS (GitHub Pages делает это автоматически).
  - Откройте сайт в Chrome на Android — вы увидите кнопку/предложение «Установить» или в меню браузера выберите "Добавить на главный экран".
  - На iOS: в Safari откройте страницу → кнопка Share → "На экран «Домой»" (Add to Home Screen). На iOS SW работает ограниченно.

Примечание: для корректной установки и оффлайн‑работы убедитесь, что `manifest.json` и `sw.js` доступны в корне сайта и что иконки лежат по корректным путям (`/icons/icon-192.png`, `/icons/icon-512.png` и т.д.).

---

### Частые вопросы и советы

Q: Можно ли автоматически подтягивать цену топлива для моей страны?  
A: В текущей версии — нет. Цена вводится вручную. Это сделано специально, чтобы пользователь мог вводить актуальную цену.

Q: Что делает кнопка "Добавить сегмент"?  
A: Добавляет блок сегмента с полями: километры, расход и режим. Каждый сегмент учитывается в суммарных вычислениях. Сегменты можно удалять.

Q: Как быстро отменить всё (включая сегменты)?  
A: Нажмите "Сбросить значения" — будет подтверждение. После подтверждения калькулятор вернёт поля к значениям по умолчанию и удалит все сегменты. Тема не меняется.

Q: Где хранятся настройки темы?  
A: Предпочтение темы сохраняется в `localStorage`, поэтому выбор темы сохраняется между визитами в браузере.

---

### Доступность и клавиатура

- Поля стандартные HTML input/select — можно вводить с клавиатуры.
- Нажатие Enter в поле запускает перерасчёт (калькулятор слушает события input/change).
- Подсказки об ошибках — в виде красной рамки вокруг поля.

---

### Развертывание (коротко для разработчиков)

- Для GitHub Pages:
  - Разместите файлы в корне ветки `main` (или `gh-pages`) — `index.html`, `manifest.json`, `sw.js`, папку `icons/`.
  - Включите Pages в настройках репозитория (Branch: main, Folder: /).
  - Подождите несколько минут — сайт будет доступен по `https://<логин>.github.io/<repo>/`.

- При изменениях в `sw.js` меняйте имя кеша (CACHE_NAME) или реализуйте стратегию обновления — иначе пользователи могут видеть старую версию.

---

### Безопасность и приватность

- Приложение не передаёт данные на сервер — всё выполняется в браузере (кроме опциональной автоподстановки цены по геолокации, если вы её добавите).  
- Если в будущем будете добавлять внешние API (например, цены топлива), отображайте источник данных и запрашивайте разрешения у пользователя при необходимости.

---

### Контакты и вклад

Если у тебя есть идеи по улучшению (импорт/экспорт истории, конвертация единиц, автоподстановка цен по API и т.д.), предложи их — я могу помочь реализовать.

Если ты хочешь оформить репозиторий, добавь в него:
- LICENSE (например MIT)
- CONTRIBUTING.md (правила вкладов)
- ISSUE_TEMPLATE (если хочешь принимать отчёты об ошибках)

---


Спасибо за использование <a href="https://master-sv.com/blog/" target=_blank">MasterPRO</a> FuelCalc — удобного и лёгкого калькулятора поездок!

